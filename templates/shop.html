{% extends "base.html" %}

{% load static %}

{% block title %}
<title>Male-Fashion | Template</title>
{% endblock title %}

{% block content %}

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Shop</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="shop__sidebar">

        <div class="shop__sidebar__search">
    <form method="get" action="{% url 'core:shop' %}">
        <input type="text" name="q" placeholder="Search..." value="{{ request.GET.q }}">
        <button type="submit"><span class="icon_search"></span></button>
    </form>


    </div>

    <div class="shop__sidebar__accordion">
        <div class="accordion" id="accordionExample">

            <!-- CATEGORIES -->
            <div class="card">
                <div class="card-heading">
                    <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                </div>
                <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                    <div class="card-body">
                        <div class="shop__sidebar__categories">
                            <ul class="nice-scroll">
                                {% for category in categories %}
                                    <li>
                                        <a href="{% url 'core:shop' %}?category={{ category.slug }}"
                                           {% if selected_category == category.slug %}style="font-weight:bold"{% endif %}>
                                            {{ category.name|title }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- BRANDS -->
            <div class="card">
                <div class="card-heading">
                    <a data-toggle="collapse" data-target="#collapseTwo">Branding</a>
                </div>
                <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                    <div class="card-body">
                        <div class="shop__sidebar__brand">
                            <ul>
                                {% for brand in brands %}
                                    <li>
                                        <a href="{% url 'core:shop' %}?brand={{ brand.slug }}"
                                           {% if selected_brand == brand.slug %}style="font-weight:bold"{% endif %}>
                                            {{ brand.name|title }}
                                        </a>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PRICE -->
            <div class="card">
                <div class="card-heading">
                    <a data-toggle="collapse" data-target="#collapseThree">Filter Price</a>
                </div>
                <div id="collapseThree" class="collapse show" data-parent="#accordionExample">
                    <div class="card-body">
                        <div class="shop__sidebar__price">
                            <ul>
                                <li>
                                    <a href="{% url 'core:shop' %}?price=0-50"
                                       {% if selected_price == "0-50" %}style="font-weight:bold"{% endif %}>$0.00 - $50.00</a>
                                </li>
                                <li>
                                    <a href="{% url 'core:shop' %}?price=50-100"
                                       {% if selected_price == "50-100" %}style="font-weight:bold"{% endif %}>$50.00 - $100.00</a>
                                </li>
                                <li>
                                    <a href="{% url 'core:shop' %}?price=100-150"
                                       {% if selected_price == "100-150" %}style="font-weight:bold"{% endif %}>$100.00 - $150.00</a>
                                </li>
                                <li>
                                    <a href="{% url 'core:shop' %}?price=150-200"
                                       {% if selected_price == "150-200" %}style="font-weight:bold"{% endif %}>$150.00 - $200.00</a>
                                </li>
                                <li>
                                    <a href="{% url 'core:shop' %}?price=200-250"
                                       {% if selected_price == "200-250" %}style="font-weight:bold"{% endif %}>$200.00 - $250.00</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SIZE -->
            <<!-- SIZE -->
<div class="card">
    <div class="card-heading">
        <a data-toggle="collapse" data-target="#collapseFour">Size</a>
    </div>
    <div id="collapseFour" class="collapse show" data-parent="#accordionExample">
        <div class="card-body">
            <div class="shop__sidebar__size">
                {% for size in sizes %}
                    <form method="get" action="{% url 'core:shop' %}" style="display:inline-block;">
                        <input type="hidden" name="size" value="{{ size.id }}">
                        <button type="submit"
                                {% if selected_size == size.id|stringformat:"s" %}style="font-weight:bold"{% endif %}>
                            {{ size.name }}
                        </button>
                    </form>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</div>

                </div>
                <div class="col-lg-9">
                    <div class="shop__product__option">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div class="shop__product__option__left">
                                    {% comment %} <p>Showing 1â€“12 of 126 results</p> {% endcomment %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        {% for product in products %}
                        <!-- Single product -->
                        <div class="col-lg-3 col-md-6 col-sm-6 col-md-6 col-sm-6 mix {{ product.category.name | lower }}"> <!-- filter qilish -->
                            <div class="product__item">
                                <div class="product__item__pic set-bg" data-setbg="{{ product.main_image.url }}">
                                    {% if product.is_sale %}
                                        <span class="label" style="color: red;">Sale</span>
                                    {% else %}
                                        <span class="label">New</span>
                                    {% endif %}
                                </div>
                                <div class="product__item__text">
                                    <h6>{{ product.name }}</h6>
                                    <a href="{% url "core:shop-detail" %}" class="add-cart">+ Add To Cart</a>
                                    {% if product.is_sale %}
                                        <h5 style="color: green;">
                                            <del style="color: red;">${{ product.price }}</del>
                                            - ${{ product.discounted_price|floatformat:2 }}
                                        </h5>
                                    {% else %}
                                        <h5>${{ product.price|floatformat:2 }}</h5>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <!-- End of single product -->
                        {% endfor %}
                        
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="product__pagination">

    {% if page_obj.paginator.count == 0 %}
        <span>Not available</span>
    {% else %}

        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">&laquo;</a>
        {% endif %}

        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <a class="active" href="?page={{ num }}">{{ num }}</a>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                <a href="?page={{ num }}">{{ num }}</a>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">&raquo;</a>
        {% endif %}

    {% endif %}

</div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Shop Section End -->

   {% endblock content %}